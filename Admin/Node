FROM ubuntu:18.04
 RUN apt-get update \
      && apt-get install -y curl \
      && apt-get -y autoclean \
      && apt-get -yqq install ssh \
      &&  apt-get -y install curl git vim build-essential \
      && apt-get install -y rsync
  RUN mkdir /root/.ssh/
  COPY key.pem /root/.ssh/id_rsa
  RUN ls /root/.ssh/
  RUN chmod 400 /root/.ssh/id_rsa
  RUN touch /root/.ssh/known_hosts
  RUN ssh-keyscan github.com >> /root/.ssh/known_hosts
  WORKDIR /var/www/admin
  COPY . ./
  RUN rm /bin/sh && ln -s /bin/bash /bin/sh
  ENV NVM_DIR /usr/local/nvm
  ENV NODE_VERSION 9.11.2
  RUN curl --silent -o- https://raw.githubusercontent.com/creationix/nvm/v0.31.2/install.sh | bash
  RUN source $NVM_DIR/nvm.sh \
      && nvm install $NODE_VERSION \
      && nvm alias default $NODE_VERSION \
      && nvm use default
  ENV NODE_PATH $NVM_DIR/v$NODE_VERSION/lib/node_modules
  ENV PATH $NVM_DIR/versions/node/v$NODE_VERSION/bin:$PATH
